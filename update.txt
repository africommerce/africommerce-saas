Refactored profile update logic for reusability
